{"version":3,"file":"tratamentoSolicitacao/tratamentoSolicitacao.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://@fullcalendar-examples/webpack/./src/TratamentoSolicitacao/index.js"],"sourcesContent":["// import \"../TratamentoSolicitacao/index.css\";\r\n// import \"../assets/fonts.css\";\r\n\r\n/*\r\nRECUPERA OS DADOS DA KEY solicitacoes E PREENCHE OS CAMPOS DA TELA DE\r\nTRATAMENTO DA SOLICITAÇÃO\r\n*/\r\n\r\n// Manipulação do localStorage para a key 'solicitacoes'\r\nfunction setLocalStorageSolicitation(solicitacoes) {\r\n  return localStorage.setItem(\"solicitacoes\", JSON.stringify(solicitacoes));\r\n}\r\n\r\nfunction getLocalStorageSolicitation() {\r\n  return JSON.parse(localStorage.getItem(\"solicitacoes\")) ?? [];\r\n}\r\n\r\nfunction readSolicitation() {\r\n  return getLocalStorageSolicitation();\r\n}\r\n\r\n// Manipulação do localStorage para a key 'db_agenda_refused'\r\nfunction setLocalStorageRefused(db_refused) {\r\n  return localStorage.setItem(\"db_agenda_refused\", JSON.stringify(db_refused));\r\n}\r\n\r\nfunction getLocalStorageRefused() {\r\n  return JSON.parse(localStorage.getItem(\"db_agenda_refused\")) ?? [];\r\n}\r\n\r\n// Move solicitação para 'db_agenda_refused' e remove de 'solicitacoes'\r\nfunction refuseSolicitation(id) {\r\n  const solicitacoes = readSolicitation();\r\n  const refusedSolicitation = solicitacoes.find(client => client.id === parseInt(id));\r\n  const updatedList = solicitacoes.filter(client => client.id !== parseInt(id));\r\n\r\n  if (refusedSolicitation) {\r\n    const db_refused = getLocalStorageRefused();\r\n    db_refused.push(refusedSolicitation);\r\n    setLocalStorageRefused(db_refused);\r\n  }\r\n\r\n  setLocalStorageSolicitation(updatedList);\r\n}\r\n\r\n// Recupera os parâmetros da query string da URL\r\nfunction getQueryParams() {\r\n  const params = {};\r\n  const queryString = window.location.search.substring(1);\r\n  const regex = /([^&=]+)=([^&]*)/g;\r\n  let m;\r\n  while ((m = regex.exec(queryString))) {\r\n    params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);\r\n  }\r\n  return params;\r\n}\r\n\r\n// Preenche o formulário com os dados da query string, se houver\r\nconst queryParams = getQueryParams();\r\nif (queryParams.data) {\r\n  fillFormWithData(queryParams.data);\r\n}\r\n\r\n// Preenche o formulário com os dados fornecidos pela key 'solicitacoes'\r\nfunction fillFormWithData(data) {\r\n  const clientData = JSON.parse(decodeURIComponent(data));\r\n  document.getElementById(\"form\").setAttribute(\"data-id\", clientData.id);\r\n  document.getElementById(\"nameClient\").value = clientData.clientName;\r\n  document.getElementById(\"emailClient\").value = clientData.clientEmail;\r\n  document.getElementById(\"foneClient\").value = clientData.clientPhone;\r\n  document.getElementById(\"namePet\").value = clientData.petName;\r\n  document.getElementById(\"pelagem\").value = clientData.pelagemType;\r\n  document.getElementById(\"raca\").value = clientData.raca;\r\n  document.getElementById(\"idade\").value = clientData.idade;\r\n  document.getElementById(\"porte\").value = clientData.porte;\r\n  document.getElementById(\"servicos\").value = clientData.service;\r\n  document.getElementById(\"dt-agenda\").value = clientData.agenda;\r\n  document.getElementById(\"text-value-obs\").value = clientData.observacoes;\r\n}\r\n\r\n// Define campos como somente leitura ao carregar a janela\r\nwindow.addEventListener(\"load\", () => {\r\n  setInputReadOnly(\"nameClient\", true);\r\n  setInputReadOnly(\"emailClient\", true);\r\n  setInputReadOnly(\"foneClient\", true);\r\n  setInputReadOnly(\"namePet\", true);\r\n  setInputReadOnly(\"idade\", true);\r\n  setInputReadOnly(\"porte\", true);\r\n  setInputReadOnly(\"pelagem\", true);\r\n  setInputReadOnly(\"raca\", true);\r\n  setInputReadOnly(\"services\", true);\r\n  setInputReadOnly(\"dt-agenda\", true);\r\n  setInputReadOnly(\"text-value-obs\", true);\r\n});\r\n\r\n// Define um campo de entrada como somente leitura ou editável\r\nfunction setInputReadOnly(id, isReadOnly) {\r\n  const element = document.getElementById(id);\r\n  element.readOnly = isReadOnly;\r\n}\r\n\r\n// Envia a solicitação confirmada para 'db_agenda' se os campos forem válidos\r\nfunction sendClient() {\r\n  if (isValidFields()) {\r\n    const clientRequest = {\r\n      id: document.getElementById(\"form\").getAttribute(\"data-id\"), // Adiciona o ID\r\n      cliente: {\r\n        nome: document.getElementById(\"nameClient\").value,\r\n        email: document.getElementById(\"emailClient\").value,\r\n        celular: document.getElementById(\"foneClient\").value,\r\n      },\r\n      pet: {\r\n        nome: document.getElementById(\"namePet\").value,\r\n        idade: document.getElementById(\"idade\").value,\r\n        porte: document.getElementById(\"porte\").value,\r\n        pelagem: document.getElementById(\"pelagem\").value,\r\n        raça: document.getElementById(\"raca\").value,\r\n      },\r\n      serviço: {\r\n        servicos: document.getElementById(\"services\").value,\r\n      },\r\n      agendamento: {\r\n        horário: document.getElementById(\"dt-agenda\").value,\r\n      },\r\n      observação: {\r\n        observação: document.getElementById(\"text-value-obs\").value,\r\n      },\r\n    };\r\n    createAgendamento(clientRequest);\r\n    deleteSolicitation(clientRequest.id); // Remove solicitação aceita\r\n    clearFields();\r\n    alert(\"Solicitação aceita!\");\r\n  }\r\n}\r\n\r\n// Deleta uma solicitação da key 'solicitacoes'\r\nfunction deleteSolicitation(id) {\r\n  const solicitacoes = readSolicitation();\r\n  const updatedList = solicitacoes.filter(client => client.id !== parseInt(id));\r\n  setLocalStorageSolicitation(updatedList);\r\n}\r\n\r\n// Verifica se os campos do formulário são válidos\r\nconst isValidFields = () => {\r\n  return document.getElementById(\"form\").reportValidity();\r\n};\r\n\r\n// Limpa todos os campos do formulário\r\nfunction clearFields() {\r\n  const dataClient = document.querySelectorAll(\".dataClient\");\r\n  dataClient.forEach(field => {\r\n    field.value = \"\";\r\n  });\r\n}\r\n\r\n// Manipulação do localStorage para a key 'db_agenda'\r\nfunction setLocalStorageAgenda(db_agenda) {\r\n  return localStorage.setItem(\"db_agenda\", JSON.stringify(db_agenda));\r\n}\r\n\r\nfunction getLocalStorageAgenda() {\r\n  return JSON.parse(localStorage.getItem(\"db_agenda\")) ?? [];\r\n}\r\n\r\nfunction readAgendamento() {\r\n  return getLocalStorageAgenda();\r\n}\r\n\r\nfunction createAgendamento(client) {\r\n  const db_agenda = getLocalStorageAgenda();\r\n  db_agenda.push(client);\r\n  setLocalStorageAgenda(db_agenda);\r\n}\r\n\r\n// Funções para botões da tela de tratamento da solicitação\r\n\r\n// Permite edição dos campos do formulário\r\nfunction onClickButtonEnterAnswer() {\r\n  setInputReadOnly(\"nameClient\", false);\r\n  setInputReadOnly(\"emailClient\", false);\r\n  setInputReadOnly(\"foneClient\", false);\r\n  setInputReadOnly(\"namePet\", false);\r\n  setInputReadOnly(\"idade\", false);\r\n  setInputReadOnly(\"porte\", false);\r\n  setInputReadOnly(\"pelagem\", false);\r\n  setInputReadOnly(\"raca\", false);\r\n  setInputReadOnly(\"services\", false);\r\n  setInputReadOnly(\"dt-agenda\", false);\r\n  setInputReadOnly(\"text-value-obs\", false);\r\n}\r\n\r\n// Aceita a solicitação\r\nfunction onClickButtonAceitar() {\r\n  sendClient();\r\n}\r\n\r\n// Recusa a solicitação\r\nfunction onClickButtonRecusar() {\r\n  const form = document.getElementById(\"form\");\r\n  const id = form.getAttribute(\"data-id\");\r\n  refuseSolicitation(id);\r\n  clearFields();\r\n  alert(\"Solicitação recusada!\");\r\n}\r\n\r\n// Funções dropdown\r\n\r\n// Mostra ou esconde dropdown de idade\r\nfunction dropDownIdade(parameterIdade) {\r\n  const elementsIdade = document.getElementsByClassName(\"dropDownIdade\")[0];\r\n  if (parameterIdade === 0) {\r\n    elementsIdade.style.display = \"block\";\r\n    const translateIdade = [\"0px\", \"0px, -10px\"];\r\n    setTimeout(() => {\r\n      elementsIdade.style.transform = \"translate(\" + translateIdade[parameterIdade] + \")\";\r\n    }, 0);\r\n  } else {\r\n    elementsIdade.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// Seleciona idade no dropdown\r\nfunction idade(idade) {\r\n  const itemIdade = document.getElementById(\"itemIdade-\" + idade).innerHTML;\r\n  document.getElementsByTagName(\"input\")[5].value = itemIdade;\r\n}\r\n\r\n// Mostra ou esconde dropdown de porte\r\nfunction dropDownPorte(parameterPorte) {\r\n  const elementsPorte = document.getElementsByClassName(\"dropDownPorte\")[0];\r\n  if (parameterPorte === 0) {\r\n    elementsPorte.style.display = \"block\";\r\n    const translatePorte = [\"0px\", \"0px, -10px\"];\r\n    setTimeout(() => {\r\n      elementsPorte.style.transform = \"translate(\" + translatePorte[parameterPorte] + \")\";\r\n    }, 0);\r\n  } else {\r\n    elementsPorte.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// Seleciona porte no dropdown\r\nfunction porte(porte) {\r\n  const itemPorte = document.getElementById(\"itemPorte-\" + porte).innerHTML;\r\n  document.getElementsByTagName(\"input\")[6].value = itemPorte;\r\n}\r\n\r\n// Mostra ou esconde dropdown de pelagem\r\nfunction dropDownPelagem(parameterPelagem) {\r\n  const elementsPelagem = document.getElementsByClassName(\"dropDownPelagem\")[0];\r\n  if (parameterPelagem === 0) {\r\n    elementsPelagem.style.display = \"block\";\r\n    const translatePelagem = [\"0px\", \"0px, -10px\"];\r\n    setTimeout(() => {\r\n      elementsPelagem.style.transform = \"translate(\" + translatePelagem[parameterPelagem] + \")\";\r\n    }, 0);\r\n  } else {\r\n    elementsPelagem.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// Seleciona pelagem no dropdown\r\nfunction pelagem(pelagem) {\r\n  const itemPelagem = document.getElementById(\"itemPelagem-\" + pelagem).innerHTML;\r\n  document.getElementsByTagName(\"input\")[7].value = itemPelagem;\r\n}\r\n\r\n// Mostra ou esconde dropdown de raça\r\nfunction dropDownRaca(parameterRaca) {\r\n  const elementsRaca = document.getElementsByClassName(\"dropDownRaca\")[0];\r\n  if (parameterRaca === 0) {\r\n    elementsRaca.style.display = \"block\";\r\n    const translateRaca = [\"0px\", \"0px, -10px\"];\r\n    setTimeout(() => {\r\n      elementsRaca.style.transform = \"translate(\" + translateRaca[parameterRaca] + \")\";\r\n    }, 0);\r\n  } else {\r\n    elementsRaca.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// Seleciona raça no dropdown\r\nfunction raca(raca) {\r\n  const itemRaca = document.getElementById(\"itemRaca-\" + raca).innerHTML;\r\n  document.getElementsByTagName(\"input\")[8].value = itemRaca;\r\n}\r\n\r\n// Mostra ou esconde dropdown de serviço\r\nfunction dropDownServico(parameterServico) {\r\n  const elementsServico = document.getElementsByClassName(\"dropDownServico\")[0];\r\n  if (parameterServico === 0) {\r\n    elementsServico.style.display = \"block\";\r\n    const translateServico = [\"0px\", \"0px, -10px\"];\r\n    setTimeout(() => {\r\n      elementsServico.style.transform = \"translate(\" + translateServico[parameterServico] + \")\";\r\n    }, 0);\r\n  } else {\r\n    elementsServico.style.display = \"none\";\r\n  }\r\n}\r\n\r\n// Seleciona serviço no dropdown\r\nfunction servico(servico) {\r\n  const itemServico = document.getElementById(\"itemServico-\" + servico).innerHTML;\r\n  document.getElementsByTagName(\"input\")[9].value = itemServico;\r\n}\r\n"],"names":[],"sourceRoot":""}